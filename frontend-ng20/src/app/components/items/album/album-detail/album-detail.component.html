<app-navbar></app-navbar>

<div class="w-full px-4 py-6">
  <!-- Title -->
  <h2 class="text-3xl text-center font-audiowide text-custom-violet mb-8 break-words">
    {{ this.album.name }}
  </h2>

  <!-- Main content grid -->
  <div class="grid grid-cols-1 xl:grid-cols-2 gap-6">
    <!-- Left: Album Description and STLs -->
    <div class="flex flex-col gap-6">
      <!-- Description -->
      <div class="rounded-md border border-custom-blue-night bg-custom-bright-lilac p-4 shadow">
        <h3 class="text-lg font-audiowide text-center mb-2 text-custom-violet">Album Description</h3>
        <p class="text-center text-custom-violet">{{ this.album.description }}</p>
      </div>
      <!-- STL List -->
      <div class="rounded-md border border-custom-blue-night bg-custom-bright-lilac p-4 shadow">
        <h3 class="text-lg font-audiowide text-center mb-4 text-custom-violet">Included STLs</h3>
        <div class="flex flex-col gap-4">
            @for (stl of this.includedSTLs; track stl) {
                <div
                class="flex items-center justify-center bg-custom-violet text-custom-bright-lilac p-2 rounded shadow"
                >
                <button (click)="this.selectSTL(stl)" 
                    class="font-audiowide button1">
                    {{ stl.name }}
                </button>
            </div>
            }
        </div>
        </div>
      </div>
      <!-- Right: STL Info and Actions -->
      <div class="flex flex-row gap-0 justify-center">
          @if (!loadingSTL) {
            <div>
                <h3 class="text-lg font-audiowide text-center mb-2 
                    text-custom-violet">
                    {{selectedSTL.name}}
                </h3>
                <p>{{selectedSTL.description}}</p>
                <div class="flex flex-col justify-center gap-2 my-4 items-center text-center">
                    <div class="w-1/2 rounded-md bg-custom-blue-night text-custom-tulip">{{selectedSTL.category1}}</div>
                    <div class="w-1/2 rounded-md bg-custom-blue-night text-custom-tulip">{{selectedSTL.category2}}</div>
                </div>
                <figure>
                    <img class="w-1/2 mx-auto my-4 rounded-md"
                    [src]="selectedSTL.images || 'fallback.jpg'"
                    alt="STL preview"/>
                </figure>
                <div class="flex justify-center gap-4 my-4 text-lg font-audiowide">
                    <div>{{selectedSTL.likes}} üëç</div>
                    <div>{{selectedSTL.downloads}} üì•</div>
                    <div>{{selectedSTL.price}} üí∂</div>
                </div>
            
            </div>
            <app-stl-viewer class="w-1/2 mx-auto my-4"
                [stlUrl]="selectedSTL.file_url">
            </app-stl-viewer>
    
        }@else {
            <div class="flex justify-center items-center h-full m-4 mb-20 p-4">
                <app-loader></app-loader>
            </div>
            }
        </div>  
    </div>




    <div class="flex flex-col gap-6">
      <!-- Stats -->
      <div class="bg-custom-violet text-custom-bright-lilac rounded-md p-4 shadow flex flex-col gap-2 items-center">
        <div class="font-audiowide text-lg">üí∂ Price: {{ this.album.price || 0 }} ‚Ç¨</div>
        <div class="font-audiowide text-lg">üëç Likes: {{ this.album.likes || 0 }}</div>
        <div class="font-audiowide text-lg">üì• Downloads: {{ this.album.downloads || 0 }}</div>
      </div>

      <!-- Buttons -->
      <div class="flex justify-center gap-4 flex-wrap">
        <button class="button1">Buy</button>
      </div>
    </div>
  </div>


